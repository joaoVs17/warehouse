<div class="page-title">
    <span class="title">
        {{title}}
    </span>
    <ul>
        <a *ngFor="let parent of parentList" routerLink="/home/my_files/folders/{{parent.id}}">
            <li ><i class="pi pi-angle-right"></i><span>{{parent.name}}</span></li>
        </a>
    </ul>
</div>
<hr>

<div class="browse-content"> 
    <div class="folders">
        <div><p>Folders</p></div>
    @if (foldersList.length > 0) {
        <div class="folder-list">
            <div class="folder" *ngFor="let folder of foldersList">
                <app-folder [folder]="folder"></app-folder>
                <i class="pi pi-ellipsis-v menu-ico" [matMenuTriggerFor]="folderMenu" (click)="selectedFolderIdMenu = folder._id || ''"></i>
            </div>
        </div>
        <mat-menu class="folder-menu" #folderMenu="matMenu">
            <i class="pi pi-star" (click)="starFolder(selectedFolderIdMenu)"></i>
            <i class="pi pi-pencil" (click)="renameFolder(selectedFolderIdMenu)"></i>
            <i class="pi pi-trash" (click)="trashFolder(selectedFolderIdMenu)"></i>  
        </mat-menu>
    }
    @if (foldersList.length == 0) {
        <div class="create-new-folders">
            <span>There's no folders here. Create a new one!</span>
        </div>
    }
    </div>        

    <div class="files">
        <div><p>Files</p></div>
        @if (filesList.length > 0){

            <div class="file-list" (fileDropped)="onFileDropped($event)" appDragAndDrop>
                <div class="file" *ngFor="let file of filesList">
                    <app-file [file]="file"></app-file>
                    <i class="pi pi-ellipsis-v menu-ico" [matMenuTriggerFor]="fileMenu" (click)="selectedFile = file"></i>
                    <i [ngClass]="file.metadata.starred ? 'starred' : 'not-starred'" class="pi pi-star-fill starred-ico"></i>
                </div>
            </div>

            <mat-menu class="file-menu" #fileMenu="matMenu">
                <i class="pi pi-star" (click)="starFile(selectedFile?._id || '')"></i>
                <i class="pi pi-pencil" (click)="renameFile(selectedFile?._id || '')"></i>
                <i class="pi pi-trash" (click)="trashFile(selectedFile?._id || '')"></i>
                <i class="pi pi-download" (click)="downloadFile(selectedFile?._id || '')"></i>
            </mat-menu>

        }
        @if (filesList.length == 0) {
            <div class="drop-files-here" (fileDropped)="onFileDropped($event)" appDragAndDrop>
                <span>Nothing Here. Drop some files</span>
            </div>
        }
    </div>
</div>

    

